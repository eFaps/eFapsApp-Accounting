<?xml version="1.0" encoding="UTF-8"?>

<!--

  Copyright 2003 - 2013 The eFaps Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Author:          The eFaps Team
  Revision:        $Rev$
  Last Changed:    $Date$
  Last Changed By: $Author$

-->

<install xmlns="http://www.efaps.org/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.efaps.org/xsd http://www.efaps.org/xsd/eFaps_1.0.xsd">
    <application>eFapsApp-Accounting</application>
    <dependencies>
        <dependency order="0">
            <groupId>org.efaps</groupId>
            <artifactId>efaps-kernel-install</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
        <dependency order="1">
            <groupId>org.efaps</groupId>
            <artifactId>efaps-webapp-install</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
        <dependency order="2">
            <groupId>org.efaps.apps</groupId>
            <artifactId>contacts</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
        <dependency order="3">
            <groupId>org.efaps.apps</groupId>
            <artifactId>commons</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
        <dependency order="4">
            <groupId>org.efaps.apps</groupId>
            <artifactId>products</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
        <dependency order="5">
            <groupId>org.efaps.apps</groupId>
            <artifactId>sales</artifactId>
            <version>5.0.0-SNAPSHOT</version>
        </dependency>
    </dependencies>
    <version number="1" reloadCache="false" login="true" compile="true">
        <description>Install ERP-Accounting Basic Modul.</description>
        <script type="groovy">
            import java.io.File;
            import java.util.UUID;
            import org.efaps.admin.runlevel.RunLevel;
            import org.efaps.admin.user.JAASSystem;
            import org.efaps.admin.user.Role;
            import org.efaps.db.Context;
            import org.efaps.db.QueryBuilder;
            import org.efaps.db.InstanceQuery;
            import org.efaps.esjp.admin.ui.UIUpdate;
            import org.efaps.esjp.data.ObjectImport;
            import org.efaps.esjp.admin.user.RoleUpdate;

            EFAPS_LOGGER.info("Importing Data for eFapsApp-Accounting");

            RunLevel.init("shell");
            RunLevel.execute();

            //its not possible to import CostTextPosition due to Company

            UIUpdate update = new UIUpdate();

            <!-- Accounting_MyDesk, MainToolBar -->
            update.add2Menu("250c6cd3-f4c4-4dd2-aa12-6f497260afce", "87001cc3-c45c-44de-b8f1-776df507f268", 2);

            <!-- connect the Accounting_ERP_CurrencyTree_Rate_Menu_Action_Create Menu to the ERP_CurrencyTree_Rate_Menu_Action menu -->
            update.add2Menu("d9480319-83fb-45ae-9a0b-877271acc034", "590181bd-a12f-4969-b403-5dc68d5089ef", -1);

            <!-- connect the Accounting_Sales_TaxTree_Account Menu to the Sales_TaxTree menu -->
            update.add2Menu("bc6cce90-6292-40ec-85c4-81c0e2110ae7", "d40d45b3-b2a1-45e8-ae72-fc991cb945f7", -1);

             <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_InvoiceTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "55f86f49-d9a5-4654-9bdb-9d0b61e4b8e5", -1);

             <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_CollectionOrderTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "b8421e95-12d9-48dd-8a2e-1507779c60da", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_CreditNoteTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "22a08697-2de1-4ef7-9dbb-10b2a61553cd", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_ReminderTree  menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "1f64d98c-eb58-421d-adb5-e2da34ff49d4", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_ReceiptTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "9e4252a9-09de-4426-b2d2-8ca573de07a9", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_ReturnSlipTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "f092435c-f527-41e8-af3b-ec64b9f96387", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_DeliveryNoteTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "275af5de-041b-4d8a-8fa8-80951035c616", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction to Sales_IncomingInvoiceTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "0370fa3a-6733-4481-841a-645d0e78e54f", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_ExchangeTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "feff8e73-a7f7-4717-8cd9-104f57b678a5", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_IncomingExchangeTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "d3586d4f-7b25-49b6-9319-2ba4e6cf68af", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Menu to the Sales_PettyCashReceiptTree menu -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "bd92f918-d154-478d-a686-b8fe256c8900", -1);

            <!-- connect the Accounting_Sales_DocumentSumTree_Transaction Sales_FundsToBeSettledReceiptTree  -->
            update.add2Menu("06018fca-1ee8-40df-8030-460f57acb447", "4cf1e2e4-d744-4ce5-be8f-9bb784bd37a4", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentCashOutTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "d5bd0a02-56e8-4cf7-bf04-1c5e179856a2", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentCashTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "0197b949-72ef-4077-b8d0-5e47c819508e", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentCheckOutTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "a8b7dedb-0a6a-474b-b4c0-c1e0079e0110", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentCheckTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "1ef1687d-8cb0-46dd-9192-eecc84b4a4f6", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentCreditCardTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "3cbeda1d-1d9a-49e5-9572-9dcc18ec4491", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentDebitCardTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "ea76d9e4-a84b-45c8-a1e7-fc761dc3dfa3", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentDepositOutTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "ea81d977-e671-42a1-a967-76f5c3c9b3f8", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentDepositTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "e766d398-6cf3-484b-b1a7-0d2ac720ee59", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentDetractionOutTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "2165ee99-2602-42eb-8dc3-8e9f2c02cfa2", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentDetractionTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "06f05925-1937-42ed-a9ed-faa852cd0def", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentExchangeOutTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "074f00b3-5dd8-429b-845c-78a703ef978e", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentExchangeTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "e145df4d-6301-4eda-a6f0-00a701ca4818", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentInternalTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "7de80742-8c3f-4850-af69-1578f3fb5709", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentOrderTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "9f8cb115-6abf-4d06-ac0d-6f98a6364234", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentRetentionOutTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "6cd29990-ca8c-4556-8e90-65263deb4525", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentRetentionTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "9ea19998-7cb9-49fb-a5f8-ae0b3cbe0b5f", -1);



            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction Sales_PaymentScheduleTree  -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "60732b90-3b07-4ca4-af15-6fb0712c8670", -1);

            <!-- connect the Accounting_Sales_PaymentDocTree_Transaction  Sales_PaymentSupplierOutTree -->
            update.add2Menu("4d17bb1a-51ef-4a2d-a511-052b1a88def3", "9e1ea83a-7670-47ee-9a73-134f07ef3585", -1);

            <!-- connect the Accounting_Sales_Document_PLEReport to Sales_Document_ReportMyDesk menu -->
            update.add2Menu("0bbae7f9-a7ae-4569-a08f-083930135f12", "218a4858-af25-4ad8-8a28-7283cd629766", -1);

            <!-- connect the Accounting_ActionDefinitionTree_Case to ERP_ActionDefinitionTree menu -->
            update.add2Menu("cda69309-ad64-4da9-8a8b-7a53b5f8f862", "789a0cb2-921c-4a2b-98e4-19123b1d567c", -1);

            <!-- Accounting_Accounting, Admin_Help_MainMenu -->
            update.add2Help("906bd8c4-2e7f-4234-936b-6a1ee74bdf37", "dead549e-5cc6-49f9-9a79-8e33aa139f6d", -1);

            <!-- add to Accounting_Admin role -->
            RoleUpdate rolUp = new RoleUpdate("c687443f-e47e-4689-8a51-7eacdeac1e09");
            <!-- Sales_IncomingDetractionMyDesk -->
            rolUp.addUI("43f18157-a158-4426-8082-e7f4ce4851ed");
            <!-- Sales_IncomingRetentionMyDesk -->
            rolUp.addUI("ef7ab984-44aa-45de-ba12-148ee783ba43");
            <!-- Sales_IncomingDetractionMyDesk_Menu_Action_CreatePaymentDetractionOut -->
            rolUp.addUI("f21aa796-f233-41f3-b0dc-dc9fff2f4892");

            <!-- add to Accounting_Manager role -->
            rolUp = new RoleUpdate("757f9274-acd0-416a-a336-20470409e8af");
            <!-- Sales_IncomingDetractionMyDesk -->
            rolUp.addUI("43f18157-a158-4426-8082-e7f4ce4851ed");
            <!-- Sales_IncomingRetentionMyDesk -->
            rolUp.addUI("ef7ab984-44aa-45de-ba12-148ee783ba43");
            <!-- Sales_IncomingDetractionMyDesk_Menu_Action_CreatePaymentDetractionOut -->
            rolUp.addUI("f21aa796-f233-41f3-b0dc-dc9fff2f4892");

            <!-- add to Accounting_Executive role -->
            rolUp = new RoleUpdate("fc3af4de-83c9-4165-b466-5478329847eb");
            <!-- Sales_IncomingDetractionMyDesk -->
            rolUp.addUI("43f18157-a158-4426-8082-e7f4ce4851ed");
            <!-- Sales_IncomingRetentionMyDesk -->
            rolUp.addUI("ef7ab984-44aa-45de-ba12-148ee783ba43");
            <!-- Sales_IncomingDetractionMyDesk_Menu_Action_CreatePaymentDetractionOut -->
            rolUp.addUI("f21aa796-f233-41f3-b0dc-dc9fff2f4892");

        </script>
    </version>
</install>
