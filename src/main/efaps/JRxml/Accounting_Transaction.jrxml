<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Accounting_Transaction" language="groovy" pageWidth="595" pageHeight="842" columnWidth="539" leftMargin="28" rightMargin="28" topMargin="28" bottomMargin="28">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="EFAPS_DEFINITION" class="java.lang.String" isForPrompting="false">
		<property name="UUID" value="7e65f5a8-4957-4494-a75f-e437820b673b"/>
		<property name="Instance" value="true"/>
		<property name="hasSubReport" value="true"/>
	</parameter>
	<parameter name="EFAPS_SUBREPORT" class="java.util.HashMap"/>
	<field name="name" class="java.lang.String">
		<property name="Select" value="attribute[Name]"/>
	</field>
	<field name="description" class="java.lang.String">
		<property name="Select" value="attribute[Description]"/>
	</field>
	<field name="date" class="org.joda.time.DateTime">
		<property name="Select" value="attribute[Date]"/>
	</field>
	<field name="externalTaxNumber" class="java.lang.String">
		<property name="Select" value="class[Accounting_TransactionClassExternal].linkto[DocumentLink].linkto[Contact].class[Contacts_ClassOrganisation].attribute[TaxNumber]"/>
	</field>
	<field name="docTaxNumber" class="java.lang.String">
		<property name="Select" value="class[Accounting_TransactionClassDocument].linkto[DocumentLink].linkto[Contact].class[Contacts_ClassOrganisation].attribute[TaxNumber]"/>
	</field>
	<field name="externalContact" class="java.lang.String">
		<property name="Select" value="class[Accounting_TransactionClassExternal].linkto[DocumentLink].linkto[Contact].attribute[Name]"/>
	</field>
	<field name="docContact" class="java.lang.String">
		<property name="Select" value="class[Accounting_TransactionClassDocument].linkto[DocumentLink].linkto[Contact].attribute[Name]"/>
	</field>
	<pageHeader>
		<band height="20">
			<textField pattern="dd/MM/yyyy">
				<reportElement x="439" y="0" width="100" height="20"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="63">
			<textField>
				<reportElement x="0" y="0" width="539" height="16"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="16" width="439" height="16"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{description}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="439" y="16" width="100" height="16"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{date}.toDate()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="50" width="110" height="13"/>
				<textElement/>
				<text><![CDATA[Cuenta]]></text>
			</staticText>
			<staticText>
				<reportElement x="335" y="50" width="80" height="13"/>
				<textElement/>
				<text><![CDATA[Debito]]></text>
			</staticText>
			<staticText>
				<reportElement x="415" y="50" width="80" height="13"/>
				<textElement/>
				<text><![CDATA[Credito]]></text>
			</staticText>
			<staticText>
				<reportElement x="495" y="50" width="44" height="13"/>
				<textElement/>
				<text><![CDATA[Cambio]]></text>
			</staticText>
			<staticText>
				<reportElement x="110" y="50" width="225" height="13"/>
				<textElement/>
				<text><![CDATA[DescripciÃ³n]]></text>
			</staticText>
			<textField>
				<reportElement mode="Transparent" x="0" y="32" width="539" height="16"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{externalContact} != null && $F{externalContact}.length() > 0)
 ? $F{externalContact} + " - " + $F{externalTaxNumber}
 : $F{docContact} + " - " + $F{docTaxNumber}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="228" splitType="Stretch">
			<subreport isUsingCache="false">
				<reportElement x="0" y="0" width="539" height="228"/>
				<subreportParameter name="EFAPS_DEFINITION"/>
				<dataSourceExpression><![CDATA[$P{EFAPS_SUBREPORT}.get("Accounting_TransactionPosition")]]></dataSourceExpression>
				<subreportExpression class="java.lang.String"><![CDATA["JasperReport.Accounting_TransactionPosition"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
